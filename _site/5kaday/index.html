<!DOCTYPE html>
<!--[if lt IE 7]> <html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]> <html lang="en" class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]> <html lang="en" class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
    <meta charset="utf-8">
    <title>5k a day - for Neal</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Supporting a friend in need by running a 5k every day in November." name="description">
    <meta content="callmeaaron.com" name="author">
    <link href="css/style.css" rel="stylesheet">
    <script src="js/libs/modernizr.min.js"></script>
    <link href="ico/favicon.ico" rel="shortcut icon">
    <link href="ico/apple-touch-icon.png" rel="apple-touch-icon">
    <link href="ico/apple-touch-icon-72x72.png" rel="apple-touch-icon" sizes="72x72">
    <link href="ico/apple-touch-icon-114x114.png" rel="apple-touch-icon" sizes="114x114">
</head>
<body class="about">
    <div class="container">
        <div class="row">

            <!-- .................................... $header .................................... -->
            <header class="span4">
                <div class="affix">
                    <div class="navbar span4">
                        <div class="navbar-inner">
                            <a class="brand" href="index.html">
                                <img alt="" src="img/5kaday-logo.png">
                            </a>

                            <h3>Supporting a friend by running a 5k every day in November.</h3>

                            <p><img src="img/neal@2x.png" alt="Neal Young"></p>

                            <p>My good friend Neal Young, who is also the head basketball coach at Goshen College is battling T-cell lymphoblastic lymphoma.</p>

                            <p>Neal has always been a source of inspiration and energy for everyone around him.  His spirit for life and those in his life is something very special.  As he continues to battle this disease I hope this simple running challenge can raise some awareness and ultimately help raise some funds to offset his medical expenses.</p>

                                
                        </div><!-- /navbar-inner -->
                    </div><!-- /navbar -->
                    <aside class="span4 text-center hidden-phone">
                        <p>Built by <a href="http://callmeaaron.com">Aaron White</a></p>
                    </aside>
                </div><!-- /affix -->
            </header>

            <div class="main span8">

                <h2>My name is <a href="callmeaaron.com">Aaron White</a> and I'm running a 5k every day in November for Neal Young and you can join me!</h2>

                <hr>

                <div class="row">
                    <div class="span5">
                        <p>Join me in this mission to show Neal your support and encouragment.  You don't have to run a 5k every day like me.  Actually to show your support you don't have to run at all!</p>
                        <p><strong>Here's how to show your support:</strong></p>
                        <ul>
                            <li>Donate!  All funds go straight to Neal.</li>
                            <li>Run a 5k as often as you like and when you do, share it on Twitter with the hashtag <strong>#5kforneal</strong>.</li>
                            <li>Share your encouragement on Twitter with the hashtag <strong>#5kforneal</strong>.  I'm sure he'd love it and I'll probably need some too!</li>
                        </ul>
                    </div>
                    <div class="span3">
                        <div class="donate">
                            <p>Neal has already been fighting this for several months and although he is responding well to treatment, he still has a very long road of treatment to remission.</p>
                            <p><small>All funds will go to Neal to offset his medical expenses for his treatments.</small></p>
                            <a class="btn btn-primary" href="https://spacebox.io/s/x5bXivsusO">
                                <img src="img/donate-icon.png" alt="">
                                <span>Donate!</span>
                            </a>
                        </div>
                    </div>
                </div>

                <hr>

                

                    <div class="row">
                        <div class="span4">
                            <h4>Aaron's Runs<small>Daily runs recorded with Runkeeper</small></h4>
                           <!-- jQuery Template -->
                            <script id="runs" type="text/x-jquery-tmpl">  
                                <li class="clearfix">  
                                    <div class="date">
                                        <span class="month"> ${month} </span> 
                                        <br>
                                        <span class="day"> ${day} </span>
                                    </div>
                                    <div class="text">
                                        <p>
                                            <strong>Aaron</strong> completed a <span class="distance">${distance}</span>k run. </br>
                                            <small> ${note} </small>
                                        </p>
                                    </div>
                                </li>  
                            </script> 

                            <ul class="runs" id="run_log"></ul>  
                        </div>
                        <div class="span4">
                            <h4>Show your support on Twitter<small>Post a run or your support with #5kforneal</small></h4>
                            <a class="twitter-timeline" href="https://twitter.com/search?q=%235kforneal" data-widget-id="394579200973078528">Tweets about "#5kforneal"</a>
                            <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
                        </div>
                    </div>


                </section>

            </div><!-- /main span9 -->

        </div><!-- /row -->
    </div><!-- /container -->

    <!-- .................................... $scripts .................................... -->
    <script src="js/libs/jquery.min.js"></script>
    <script src="http://maps.google.com/maps/api/js?sensor=true"></script>
    <script src="js/libs/jquery.ui.map.min.js"></script>
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <script src="js/libs/jquery.fancybox.min.js"></script>
    <script src="js/libs/jquery.hoverdir.min.js"></script>
    <script src="js/libs/jquery.isotope.min.js"></script>
    <script src="js/libs/jquery.masonry.min.js"></script>
    <script src="js/libs/jquery.fitvids.min.js"></script>
    <script src="js/libs/jquery.flexslider.min.js"></script>
    <script src="js/libs/jquery.imagesloaded.min.js"></script>
    <script src="js/libs/cbpBGSlideshow.min.js"></script>
    <script src="js/libs/retina-1.1.0.min.js"></script>
    <script src="js/libs/jquery.tmpl.js"></script>
    <script src="js/libs/jquery.dateFormat-1.0.js"></script>
    <script src="js/libs/jquery.number.js"></script>
    <script src="js/libs/retina-1.1.0.min.js"></script>
    <script src="js/script.js"></script>

    <script>
        $( document ).ready(function() {
             var finishedRuns = [];   
             
             // fetch note, a secondary request of the main ajax call
             function fetchNote(data) {
                return runAjax = $.ajax({
                    type:"GET",
                    beforeSend: function (request)
                    {
                        request.setRequestHeader("Authorization", "Bearer 6065d5c1627c4c77beda373ed0da685d");
                    },
                    url: "http://api.runkeeper.com/" + data.uri, 
                    success: function(callData) {
                        // return only the notes
                        return callData.notes;
                    }
                });
             }

             // make request for run data
             $.ajax({
                type:"GET",
                beforeSend: function (request)
                {
                    request.setRequestHeader("Authorization", "Bearer 6065d5c1627c4c77beda373ed0da685d");
                },
                url: "http://api.runkeeper.com/fitnessActivities",

                success: function(data) {

                    // map each data result to runlog object
                    var runlog = $.map(data.items, function(obj, index) {

                        // formatting distance from meters to kilometers 
                        var km = obj.total_distance / 1000;
                        var final_distance = (km.toFixed(1)); // 5.0 k
                        
                        // formatting date
                        var get_date = obj.start_time
                        var date_month = ($.format.date(new Date(get_date), 'MMM'));
                        var date_day = ($.format.date(new Date(get_date), ' dd'));

                        // fetch sub data for each item
                        fetchData(obj, index);

                        // add date_time and distance to runlog for each obj
                        return({                              
                            month : date_month,           
                            day : date_day,
                            distance : final_distance
                        });
                    });

                    function fetchData(obj, index) {

                        // fetch subnote, passing in item from first request
                        var runfetch = fetchNote(obj);

                        // when fetch is done 
                        runfetch.done(function(doneData) {

                            // update runlog obj with seach note
                            runlog[index].note = doneData.notes;

                            finishedRuns.push(runlog[index]);

                            // if finshed runs equal to log total, display all
                            if (finishedRuns.length === runlog.length) {
                                $('#runs').tmpl(runlog).appendTo('#run_log');
                            }
                        });
                    }
                }
            });

        });
    </script>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-45252734-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>


</body>
</html> 